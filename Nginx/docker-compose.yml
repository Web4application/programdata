version: '3.9'
services:
  # ---------------- Frontends ----------------
  kubu-frontend:
    build: ./projects/kubu-hai/frontend
    ports:
      - "3000:3000"
    restart: always

  paperweb-frontend:
    build: ./projects/paperweb/frontend
    ports:
      - "5173:5173"
    restart: always

  aurallama-frontend:
    build: ./projects/aurallama/frontend
    ports:
      - "3001:3001"
    restart: always

  web4ai-frontend:
    build: ./projects/web4ai/frontend
    ports:
      - "3002:3002"
    restart: always

  chatgpt5-frontend:
    build: ./projects/chatgpt5-mini/frontend
    ports:
      - "3003:3003"
    restart: always

  # ---------------- Backends ----------------
  kubu-backend:
    build: ./projects/kubu-hai/backend
    ports:
      - "8081:8081"
    restart: always

  paperweb-backend:
    build: ./projects/paperweb/backend
    ports:
      - "8082:8082"
    restart: always

  aurallama-backend:
    build: ./projects/aurallama/backend
    ports:
      - "8083:8083"
    restart: always

  web4ai-backend:
    build: ./projects/web4ai/backend
    ports:
      - "8084:8084"
    restart: always

  chatgpt5-backend:
    build: ./projects/chatgpt5-mini/backend
    ports:
      - "8085:8085"
    restart: always

  # ---------------- Nginx Reverse Proxy ----------------
  nginx:
    image: nginx:latest
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/conf.d:/etc/nginx/conf.d
      - ./nginx/certs:/etc/letsencrypt/live
    depends_on:
      - kubu-frontend
      - kubu-backend
      - paperweb-frontend
      - paperweb-backend
      - aurallama-frontend
      - aurallama-backend
      - web4ai-frontend
      - web4ai-backend
      - chatgpt5-frontend
      - chatgpt5-backend
    restart: always
